<automaton name="moving_platform">
  <param name="up_speed" value="30"/>
  <param name="down_speed" value="-30"/>

  <collider>
    <type name="moving_platform_vert"/>
    <type name="solid"/>
    <rect x="0" y="0" w="32" h="16"/>
  </collider>
  
  <group name="movement">
    <mode name="down">
      <flow var="y'" value="down_speed"/>
      <edge target="up">
        <guard>
          <colliding type="moving_platform_vert" othertype="solid"/>
        </guard>
      </edge>
    </mode>
    
    <mode name="up">
      <flow var="y'" value="up_speed"/>
      <edge target="down">
        <guard>
          <colliding type="moving_platform_vert" othertype="solid"/>
        </guard>
      </edge>
    </mode>
  </group>
</automaton>
